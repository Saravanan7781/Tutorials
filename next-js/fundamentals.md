# Next.js Routing & Project Structure Notes

## ðŸ“˜ Introduction to Next.js

- **Next.js** is a full-stack React framework for building web applications with features like:
  - File-based routing
  - Server-side rendering
  - API routes
  - Image optimization
  - Middleware and more

---

## ðŸ‘‹ Hello World in Next.js

```bash
npx create-next-app@latest my-next-app
cd my-next-app
npm run dev
```
---

## Folder structure

```
my-next-app/
â”œâ”€â”€ app/             # App directory (new routing)
â”‚   â”œâ”€â”€ page.tsx     # Root route
â”‚   â”œâ”€â”€ layout.tsx   # Root layout
â”œâ”€â”€ public/          # Static files
â”œâ”€â”€ styles/          # CSS files
â”œâ”€â”€ next.config.js   # Config file
```

>Next js uses file based routing, so any folder inside app module will be considered as a route
>
>![image](https://github.com/user-attachments/assets/4cee031e-378d-4d60-a659-1aedb28d5261)


### app/
Here, first layout.jsx which is directly inside the app directory, gets rendered first and it has code like 
#### layout.tsx 
```
export const metadata = {
  title: 'Next.js',
  description: 'Generated by Next.js',
}

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  )
}

```

We use metadata for SEO, layout is the basement which gets children prop autmatically, and children prop is nothing but page.tsx.
every folder can have layout.tsx, and page.tsx is mandatory for all folders, why because page.tsx is the main interface to display the page in that route.

---
### Nested Routes

 We can also have nested route

```
app/
â”œâ”€â”€ blog/
â”‚   â”œâ”€â”€ page.tsx    â†’ /blog
â”‚   â””â”€â”€ posts/
â”‚       â””â”€â”€ page.tsx â†’ /blog/posts
```
---
### Dynamic Routing

Whenever the route is dynamic we can use '[ ]' outer the filename which takes dynamic values. 

```
app/
â”œâ”€â”€ blog/
â”‚   â””â”€â”€ [postId]/
â”‚       â””â”€â”€ page.tsx â†’ /blog/123 or /blog/my-post
```

And this is how we access the params

```
export default function Page({ params }: { params: { postId: string } }) {
  return <h1>Post ID: {params.postId}</h1>;
}

```

---

### Nested Dynamic Routes

Combine multiple [param] folders for nested dynamic routing.

```
app/
â”œâ”€â”€ users/
â”‚   â””â”€â”€ [userId]/
â”‚       â””â”€â”€ posts/
â”‚           â””â”€â”€ [postId]/
â”‚               â””â”€â”€ page.tsx â†’ /users/5/posts/12
```

---

### ðŸª¤ Catch-all Segments

```
app/
â””â”€â”€ docs/
    â””â”€â”€ [...slug]/
        â””â”€â”€ page.tsx â†’ /docs/a/b/c

```
<ul>
  <li>...slug matches any number of path segments.</li>
  <li>Use params.slug as array:</li>
</ul>

```
  export default async function DocsPage({ params }: {
    params:Promise<{slug:string[]}>
}) {
    const { slug } = await params;
    console.log(`Slug: ${slug}`);
    if (slug?.length === 2) {
        console.log(`Slug array: ${slug}`);
        return <div>Slug for {slug[0]} and {slug[1]}</div>
    }
    else if (slug?.length === 1)
        return <div>Slug for {slug[0]}</div>
    return <div>
        <h1>Docs page</h1>
    </div>
}
```
### Not Found Page

<li>We can have not-found.tsx which is a special format for a route which is not defined and gets exectued whenever a undefined route called.</li>

<li>Create this file to show a custom 404 error page.</li>

```
export default function NotFound() {
  return <h1>404 - Page Not Found</h1>;
}
```

###  File Colocation
You can place related components, styles, and files inside the same folder:
```
app/dashboard/
â”œâ”€â”€ page.tsx
â”œâ”€â”€ Header.tsx
â”œâ”€â”€ dashboard.module.css
```

### Private Folders
Prefix a folder with _ to exclude it from the routing system:

```
app/
â”œâ”€â”€ _utils/
â”‚   â””â”€â”€ helper.ts    # Not a route
```

### Route Groups
```
app/
â”œâ”€â”€ (auth)/
â”‚   â””â”€â”€ login/
â”‚       â””â”€â”€ page.tsx â†’ /login
```
<li>Parentheses (group) create route groups.</li>

<li>Useful for layout separation or logical grouping.</li>

<li>When we search for /login it will go to the login route, no need like auth/login and also useful for separating the layouts.</li>

### Layouts
```
app/layout.tsx
Wraps all routes with a shared layout.

export default function RootLayout({ children }) {
  return (
    <html>
      <body>
        <Navbar />
        {children}
      </body>
    </html>
  );
}
```
---

Nested Layouts
```
app/
â”œâ”€â”€ dashboard/
â”‚   â”œâ”€â”€ layout.tsx
â”‚   â””â”€â”€ page.tsx
layout.tsx inside dashboard/ wraps all dashboard pages.
```

---

### Multiple Root Layouts
You can define completely separate root layouts using route groups:

```
app/
â”œâ”€â”€ (admin)/
â”‚   â”œâ”€â”€ layout.tsx
â”‚   â””â”€â”€ dashboard/
â”‚       â””â”€â”€ page.tsx
â”œâ”€â”€ (main)/
â”‚   â”œâ”€â”€ layout.tsx
â”‚   â””â”€â”€ home/
â”‚       â””â”€â”€ page.tsx
```

### Routing Metadata

Define metadata in any route using export const metadata:

```
export const metadata = {
  title: "Home Page",
  description: "Welcome to the homepage",
};
```

<li>Helps with SEO, social previews, and accessibility.</li>

### Summary:
```
page.tsx â†’ creates a route.

[param] â†’ dynamic routing.

layout.tsx â†’ shared UI wrapper.

(group) â†’ organize routes without affecting URL.

...slug â†’ catch-all segments.

_folder â†’ private, not routed.
```

### Metadata

- Metadata in Next.js is crucial for optimizing your web application's Search Engine Optimization (SEO) and improving its shareability on social media platforms. It refers to the data that provides information about other data, specifically about your web pages, and is primarily placed within the <head> section of your HTML.

- Metadata in Next.js is crucial for optimizing your web application's Search Engine Optimization (SEO) and improving its shareability on social media platforms. It refers to the data that provides information about other data, specifically about your web pages, and is primarily placed within the <head> section of your HTML.

- Here's a clear breakdown of metadata in Next.js:

- What is Metadata and Why is it Important?
- Definition: Metadata on a website is invisible data that describes the content of a page. It's not directly displayed to users but is used by browsers, search engines, and social media platforms.

#### Key Uses:

- SEO (Search Engine Optimization): Search engines use metadata (like title, description, and keywords) to understand the content and relevance of your pages, which directly impacts your website's ranking in search results. Well-defined metadata increases the likelihood of your site appearing for relevant queries.

- Social Media Sharing (Open Graph): Platforms like Facebook, Twitter, and LinkedIn use Open Graph (OG) metadata to display rich, stylized cards when your links are shared. This includes things like the title, description, and a preview image, making your shared content more appealing and informative.

- Content Discovery: Accurate metadata helps users and automated systems discover content that matches their interests.

- User Experience: Clear and descriptive titles and descriptions in search results help users quickly understand what your page is about, leading to better engagement and lower bounce rates.

### How Next.js Handles Metadata
- Next.js provides a powerful Metadata API within its App Router to manage application metadata. There are two primary ways to add metadata:

- Config-based Metadata:

- Static Metadata: You can export a metadata object directly from a layout.js or page.js file. This is suitable for metadata that remains constant across sessions or for a group of pages.

```
// app/layout.tsx (Root Layout)
import type { Metadata } from 'next';

export const metadata: Metadata = {
  title: 'My Awesome Website',
  description: 'A brief description of my awesome website.',
  applicationName: 'My App',
  authors: [{ name: 'John Doe' }],
  keywords: ['nextjs', 'react', 'web development'],
  // ... more metadata fields
};

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  );
}
```

- Dynamic Metadata (generateMetadata function):
- For cases where metadata needs to be generated based on dynamic values (e.g., from an API call, route parameters, or specific page content), you can export an async function called generateMetadata from a layout.js or page.js file. Next.js will wait for this function to complete before streaming the UI, ensuring the <head> tags are included early.

```
import { Metadata } from 'next';

type Props = {
  params: Promise<{ productId: string }>;
};

export const generateMetadata = async ({
  params,
}: Props): Promise<Metadata> => {
  const id = (await params).productId;
  return {
    title: `Product number ${id}`,
  };
};

export default async function ProductId({ params }: Props) {
  const { productId } = await params;
  return (
    <div>
      <h1>Welcome to Product {productId}</h1>
    </div>
  );
}

```
